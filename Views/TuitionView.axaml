<UserControl
  x:Class="Views.TuitionView"
  xmlns="https://github.com/avaloniaui"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:view="using:Views"
  xmlns:vm="using:ViewModels"
  d:DesignHeight="450"
  d:DesignWidth="800"
  x:DataType="vm:TuitionViewModel"
  mc:Ignorable="d">
  <Design.DataContext>
    <vm:TuitionViewModel />
  </Design.DataContext>
  <Grid Classes="MainLayout" RowDefinitions="Auto,Auto,*,Auto">

    <!--  HEADER  -->
    <Grid Classes="MainLayoutHeader" ColumnDefinitions="*,Auto">
      <StackPanel Classes="MainLayoutHeaderInfo">
        <!--  Titlte  -->
        <TextBlock Classes="Title" Text="{Binding TitlePage}" />
        <!--  SubTitle  -->
        <TextBlock Classes="SubTitle" Text="{Binding DescriptionPage}" />
      </StackPanel>
      <StackPanel Grid.Column="1" Classes="MainLayoutHeaderButtons">
        <Button
          x:Name="CreateButton"
          Padding="20,10"
          Classes="CrudButton Create">
          <Border BorderBrush="{Binding BorderBrush, RelativeSource={RelativeSource AncestorType=Button}}">
            <StackPanel>
              <Image Source="{DynamicResource SettingIcon}" />
              <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="Thiết lập" />
            </StackPanel>
          </Border>
        </Button>
        <Button x:Name="InfoButton" Classes="CrudButton Info">
          <Border BorderBrush="{Binding BorderBrush, RelativeSource={RelativeSource AncestorType=Button}}">
            <StackPanel>
              <Image Source="{DynamicResource InfoIcon}" />
              <TextBlock Text="Chi tiết" />
            </StackPanel>
          </Border>
        </Button>
        <Button x:Name="UpdateButton" Classes="CrudButton Update">
          <Border BorderBrush="{Binding BorderBrush, RelativeSource={RelativeSource AncestorType=Button}}">
            <StackPanel>
              <Image Source="{DynamicResource UpdateIcon}" />
              <TextBlock Text="Cập nhật" />
            </StackPanel>
          </Border>
        </Button>
      </StackPanel>
    </Grid>

    <!--  FILTER  -->
    <Border Grid.Row="1" Classes="FilterDataWarper">
      <Grid Classes="FilterData" RowDefinitions="*,Auto">
        <StackPanel Classes="FilterDataInputs">
          <Grid Classes="FilterDataFindInput">
            <TextBox x:Name="SearchBox" Watermark="Nhập tên học sinh hoặc lớp" TextChanged="SearchBox_TextChanged" />
            <Image Source="{DynamicResource SearchIcon}" />
          </Grid>

          <ComboBox
            x:Name="FilterYear"
            Classes="FilterDataFindSelect"
            MaxDropDownHeight="200"
            ItemsSource="{Binding ClassYearList}"
            SelectedItem="{Binding SelectedFilterClassYear, Mode=TwoWay}"
            SelectionChanged="FilterYear_SelectionChanged">
          </ComboBox>

          <ComboBox
            x:Name="FilterClass"
            Classes="FilterDataFindSelect"
            MaxDropDownHeight="200"
            ItemsSource="{Binding ClassNameList}"
            SelectedItem="{Binding SelectedFilterClassName, Mode=TwoWay}"
            SelectionChanged="FilterClass_SelectionChanged"
            IsVisible="False">
          </ComboBox>
        </StackPanel>

        <Button
          x:Name="ResetFilterButton"
          HorizontalAlignment="Right"
          VerticalAlignment="Center"
          Classes="FilterDataResetButton"
          Click="ResetFilter_Click">
          <Image Source="{DynamicResource ResetIcon}" />
        </Button>
      </Grid>
    </Border>

    <!--  BODY: TAB CONTROL  -->
    <Border Grid.Row="2" Classes="TableDataWarper">

      <TabControl x:Name="TuitionTabControl">


        <!--  TAB 1: Mức học phí  -->
        <TabItem Header="Mức học phí">
          <Border Classes="TableDataWarper">
            <DataGrid
              x:Name="Tuition_Class"
              AutoGenerateColumns="False"
              Classes="TableData"
              ItemsSource="{Binding FeeClassListView}"
              SelectedItem="{Binding SelectedClass, Mode=TwoWay}">

              <DataGrid.Columns>
                <DataGridTextColumn
                  Width="*"
                  Binding="{Binding Grade}"
                  Header="Khối" />
                <DataGridTextColumn
                  Width="*"
                  Binding="{Binding Name}"
                  Header="Lớp" />
                <DataGridTextColumn
                  Width="*"
                  Binding="{Binding Year}"
                  Header="Năm học" />
                <DataGridTextColumn
                  Width="*"
                  Binding="{Binding Status}"
                  Header="Trạng thái" />



              </DataGrid.Columns>

            </DataGrid>
          </Border>
        </TabItem>


        <!--  TAB 2: Quản lý học phí  -->
        <TabItem Header="Quản lý học phí">
          <Border Classes="TableDataWarper">
            <DataGrid
              AutoGenerateColumns="False"
              Classes="TableData"
              ItemsSource="{Binding TuitionListView}">

              <DataGrid.Columns>

                <DataGridTextColumn
                  Width="2*"
                  Binding="{Binding StudentName}"
                  Header="Học sinh" />
                <DataGridTextColumn
                  Width="1.2*"
                  Binding="{Binding ClassName}"
                  Header="Lớp" />
                <DataGridTextColumn
                  Width="*"
                  Binding="{Binding ClassYear}"
                  Header="Năm học" />

                <DataGridTemplateColumn Width="120" Header="Chi tiết">
                  <DataGridTemplateColumn.CellTemplate>
                    <DataTemplate>
                      <Button
                        Classes="TableActionButton Info"
                        Click="StudentDetail_Click"
                        Content="Xem"
                        DataContext="{Binding}" />
                    </DataTemplate>
                  </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>


              </DataGrid.Columns>
            </DataGrid>


          </Border>
        </TabItem>

      </TabControl>
    </Border>

  </Grid>
</UserControl>
