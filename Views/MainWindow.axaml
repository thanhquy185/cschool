<Window
    x:Class="Views.MainWindow"
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:view="using:Views"
    xmlns:vm="using:ViewModels"
    Title="Views"
    x:DataType="vm:MainWindowViewModel"
    CanResize="True"
    ShowInTaskbar="True"
    WindowState="Maximized"
    mc:Ignorable="d">

    <Design.DataContext>
        <vm:MainWindowViewModel />
    </Design.DataContext>

    <Grid Background="{DynamicResource BodyColor}" ColumnDefinitions="Auto, *">
        <!--  Sidebar  -->
        <Grid
            Grid.Column="0"
            Background="#FFF"
            IsVisible="{Binding IsLoggedIn}"
            RowDefinitions="Auto,*,Auto">
            <!--  User Info  -->
            <Border Padding="8">
                <!--  Border riêng cho Grid  -->
                <Border
                    Padding="12,16"
                    Background="{DynamicResource PrimaryColor}"
                    CornerRadius="10">
                    <Grid VerticalAlignment="Center" ColumnDefinitions="Auto,*,Auto">
                        <!--  Avatar  -->
                        <Border
                            Width="50"
                            Height="50"
                            ClipToBounds="True"
                            CornerRadius="25">
                            <Image
                                Width="50"
                                Height="50"
                                Source="{Binding CurrentUser.AvatarImage}"
                                Stretch="UniformToFill" />
                        </Border>
                        <!--  Name + Role  -->
                        <StackPanel
                            Grid.Column="1"
                            Width="200"
                            Margin="10,0,0,0"
                            VerticalAlignment="Center"
                            Orientation="Vertical">
                            <TextBlock
                                FontSize="20"
                                FontWeight="Bold"
                                Foreground="#FFF"
                                Text="{Binding CurrentUser.Fullname}" />
                            <TextBlock
                                Margin="0,2,0,0"
                                FontSize="16"
                                Foreground="#dedede"
                                Text="{Binding CurrentUser.RoleName}" />
                        </StackPanel>
                    </Grid>
                </Border>
            </Border>
            <!--  Menu Items  -->
            <Border
                Grid.Row="1"
                Padding="8"
                BorderBrush="#33000000"
                BorderThickness="0,1,0,1">
                <ScrollViewer VerticalScrollBarVisibility="Auto">
                    <StackPanel Spacing="10">
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding StatisticalButtonActive}"
                            Command="{Binding GoToStatisticalViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding StatisticalButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding StatisticalButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding AssignTeacherButtonActive}"
                            Command="{Binding GoToAssignTeacherViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding AssignTeacherButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding AssignTeacherButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding ExamButtonActive}"
                            Command="{Binding GoToExamViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding ExamButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding ExamButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding TuitionButtonActive}"
                            Command="{Binding GoToTuitionViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding TuitionButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding TuitionButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding HomeClassButtonActive}"
                            Command="{Binding GoToHomeClassViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding HomeClassButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding HomeClassButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding AttendanceButtonActive}"
                            Command="{Binding GoToAttendanceViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding AttendanceButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding AttendanceButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding SubjectClassButtonActive}"
                            Command="{Binding GoToSubjectClassViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding SubjectClassButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding SubjectClassButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding TeacherButtonActive}"
                            Command="{Binding GoToTeacherViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding TeacherButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding TeacherButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding StudentButtonActive}"
                            Command="{Binding GoToStudentViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding StudentButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding StudentButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding RoleButtonActive}"
                            Command="{Binding GoToRoleViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding RoleButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding RoleButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                        <Button
                            Classes="ButtonInMenu"
                            Classes.active="{Binding UserButtonActive}"
                            Command="{Binding GoToUserViewCommand}">
                            <Border Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}">
                                <StackPanel>
                                    <Image Source="{Binding UserButtonImage}" />
                                    <TextBlock Foreground="{Binding Foreground, RelativeSource={RelativeSource AncestorType=Button}}" Text="{Binding UserButtonLabel}" />
                                </StackPanel>
                            </Border>
                        </Button>
                    </StackPanel>
                </ScrollViewer>
            </Border>
            <!--  Logout Button  -->
            <Button
                Grid.Row="2"
                Classes="LogoutButton"
                Command="{Binding HandleLogoutCommand}">
                <Border
                    Padding="0,12"
                    Background="{Binding Background, RelativeSource={RelativeSource AncestorType=Button}}"
                    CornerRadius="8">
                    <StackPanel
                        HorizontalAlignment="Center"
                        Orientation="Horizontal"
                        Spacing="10">
                        <Image
                            Width="20"
                            Height="20"
                            Source="avares://Views/Assets/Images/Others/logout-icon.png" />
                        <TextBlock
                            FontSize="18"
                            FontWeight="Bold"
                            Foreground="White"
                            Text="Đăng xuất" />
                    </StackPanel>
                </Border>
            </Button>
        </Grid>
        <!--  Main Content  -->
        <ContentControl Grid.Column="1" Content="{Binding CurrentPage}" />
    </Grid>
</Window>
